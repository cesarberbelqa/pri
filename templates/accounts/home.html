{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Seção Inicial (Hero) -->
<section id="inicio" class="text-center bg-light p-5">
  <div class="container">
    <img src="{% static 'imgs/peSemFundo.png' %}" alt="Logo Pés" style="max-height: 100px;margin-bottom: -35px;">
    <h1 class="display-4" style="font-family: 'Allison', cursive;font-weight: 400;font-style: normal;font-size: 120px;">Priscila Arantes</h1>
    <p class="lead">Enfermeira | Podóloga</p>
    <hr class="my-4">
    <p class="h4">Pedicure Terapêutica com Atendimento Domiciliar</p>
    <p>Cuidados especializados para a saúde dos seus pés, no conforto da sua casa.</p>
    <a class="btn btn-primary btn-lg mt-3" href="#contato" role="button">
      <i class="fab fa-whatsapp"></i> Agendar Atendimento
    </a>
  </div>
</section>

<!-- Coloque este código no seu template da página inicial onde os serviços devem aparecer -->

{% if services %}
<section id="servicos" class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center mb-4">Nossos Principais Serviços</h2>
    
    <div id="serviceCarousel" class="carousel slide shadow-lg rounded" data-bs-ride="carousel">
      
      <!-- 1. Indicadores (as bolinhas embaixo) -->
      <div class="carousel-indicators">
        {% for service in services %}
          <button 
            type="button" 
            data-bs-target="#serviceCarousel" 
            data-bs-slide-to="{{ forloop.counter0 }}" 
            class="{% if forloop.first %}active{% endif %}" 
            aria-current="{% if forloop.first %}true{% endif %}" 
            aria-label="Slide {{ forloop.counter }}">
          </button>
        {% endfor %}
      </div>

      <!-- 2. Slides do Carrossel -->
      <div class="carousel-inner rounded">
        {% for service in services %}
          <!-- Cada 'carousel-item' é um slide -->
          <div class="carousel-item {% if forloop.first %}active{% endif %}" data-bs-interval="5000">
            
            <img src="{{ service.imagem.url }}" class="d-block w-100 carousel-image-fixed" alt="{{ service.titulo }}">
            
            <!-- Legenda sobre a imagem (visível apenas em telas médias e maiores) -->
            <div class="carousel-caption d-none d-md-block">
              <h5>{{ service.titulo }}</h5>
              <p>{{ service.descricao|truncatewords:15 }}</p>
              <p class="mb-2"><strong>Preço:</strong> R$ {{ service.preco|floatformat:2 }} | <strong>Duração:</strong> {{ service.duracao }} min</p>
              <a href="{% url 'services:list' %}" class="btn btn-primary btn-sm mt-1">Ver Todos os Serviços</a>
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- 3. Controles (Setas de Próximo/Anterior) -->
      <button class="carousel-control-prev" type="button" data-bs-target="#serviceCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#serviceCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

  </div>
</section>
{% endif %}

{% if result_section and result_cards %}
<!-- Seção de Estatísticas com Contador Dinâmico -->
<section id="estatisticas" class="stats-section bg-white">
  <div class="container">
    <h2 class="text-center mb-5">{{ result_section.title }}</h2>
    <div class="row text-center">
      {% for card in result_cards %}
      <div class="col-md-3 col-sm-6 mb-4">
        <div class="counter-box">
          <i class="fas fa-hand-holding-medical counter-icon"></i>
          <span class="counter-value" data-target="{{ card.target_number }}">0</span><span>+</span>
          <p class="counter-title">{{ card.title }}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

{% if testimonials %}
<section id="testimonials" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">What Our Clients Say</h2>
        <div class="row">
            {% for testimonial in testimonials %}
            <div class="col-md-4 mb-4">
                <div class="card h-100 text-center shadow-sm">
                    <div class="card-body">
                        <i class="fas fa-quote-left fa-2x text-primary mb-3"></i>
                        <blockquote class="blockquote mb-0">
                            <p>"{{ testimonial.body }}"</p>
                            <footer class="blockquote-footer mt-3">{{ testimonial.name }}</footer>
                        </blockquote>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'testimonials:create' %}" class="btn btn-outline-primary">Leave Your Own Testimonial</a>
        </div>
    </div>
</section>
{% endif %}
<!-- Seção de Contato -->
<section id="contato" class="py-5">
  <div class="container text-center">
    <h2>Agende o seu Atendimento Domiciliar</h2>
    <p class="lead">Entre em contato para marcar uma avaliação e cuidar da saúde dos seus pés.</p>
    <div class="mt-4">
      <a href="https://wa.me/351910355212" target="_blank" class="btn btn-success btn-lg mx-2">
        <i class="fab fa-whatsapp"></i> Chamar no WhatsApp
      </a>
      <a href="tel:+351910355212" class="btn btn-info btn-lg mx-2 text-white">
        <i class="fas fa-phone"></i> Ligar: 910 355 212
      </a>
    </div>
  </div>
</section>
{% endblock %}